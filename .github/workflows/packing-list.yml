name: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–ø–∏—Å–∫–∞ –≤–µ—â–µ–π

on:
  workflow_dispatch:
    inputs:
      trip_type:
        description: '–¢–∏–ø –ø–æ–µ–∑–¥–∫–∏'
        required: true
        type: choice
        options:
          - –ø–ª—è–∂–Ω—ã–π –æ—Ç–¥—ã—Ö
          - –≥–æ—Ä–æ–¥—Å–∫–æ–π —Ç—É—Ä–∏–∑–º
          - –≥–æ—Ä–Ω—ã–π –ø–æ—Ö–æ–¥
          - –¥–µ–ª–æ–≤–∞—è –ø–æ–µ–∑–¥–∫–∞
          - –∫–µ–º–ø–∏–Ω–≥
      days:
        description: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π'
        required: true
        type: number
        default: 7
      destination:
        description: '–ü—É–Ω–∫—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è (–¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∞ –ø–æ–≥–æ–¥—ã)'
        required: false
        type: string
        default: 'Kazan'
      has_checklist:
        description: '–î–æ–±–∞–≤–∏—Ç—å —á–µ–∫–ª–∏—Å—Ç –¥–ª—è –æ—Ç–º–µ—Ç–æ–∫?'
        required: false
        type: boolean
        default: true

jobs:
  generate-packing:
    runs-on: ubuntu-latest
    steps:
      - name: –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–¥
        uses: actions/checkout@v4

      - name: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É—Ç–∏–ª–∏—Ç—ã
        run: |
          sudo apt-get update
          sudo apt-get install -y jq bc curl

      - name: –ü–æ–ª—É—á–∞–µ–º –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –¥–ª—è –ø—É–Ω–∫—Ç–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
        if: ${{ github.event.inputs.destination != '' }}
        id: weather_forecast
        env:
          VC_API_KEY: ${{ secrets.VC_API_KEY }}
        run: |
          DESTINATION="${{ github.event.inputs.destination }}"
          DAYS="${{ github.event.inputs.days }}"
          
          # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è
          START_DATE=$(date +%Y-%m-%d)
          END_DATE=$(date -d "+$((DAYS-1)) days" +%Y-%m-%d)
          
          # –§–æ—Ä–º–∏—Ä—É–µ–º URL –∑–∞–ø—Ä–æ—Å–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –¥–∞—Ç
          REQUEST_URL="https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${DESTINATION}/${START_DATE}/${END_DATE}?unitGroup=metric&include=days&key=${VC_API_KEY}&contentType=json&lang=ru"
          
          echo "–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø—Ä–æ–≥–Ω–æ–∑ –¥–ª—è: ${DESTINATION}"
          echo "–ü–µ—Ä–∏–æ–¥: ${START_DATE} - ${END_DATE} (${DAYS} –¥–Ω–µ–π)"
          echo "URL –∑–∞–ø—Ä–æ—Å–∞: ${REQUEST_URL//${VC_API_KEY}/***}"
          
          # –î–µ–ª–∞–µ–º –∑–∞–ø—Ä–æ—Å –∫ API
          API_RESPONSE=$(curl -s -w "\n%{http_code}" "$REQUEST_URL")
          HTTP_CODE=$(echo "$API_RESPONSE" | tail -n1)
          RESPONSE_BODY=$(echo "$API_RESPONSE" | sed '$d')
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞
          if [ "$HTTP_CODE" -eq 200 ]; then
            echo "‚úÖ –ó–∞–ø—Ä–æ—Å –∫ API —É—Å–ø–µ—à–µ–Ω"
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –æ—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ
            if echo "$RESPONSE_BODY" | jq -e .days >/dev/null 2>&1; then
              # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–æ–≥–æ–¥—É –Ω–∞ –≤–µ—Å—å –ø–µ—Ä–∏–æ–¥
              MIN_TEMP=$(echo "$RESPONSE_BODY" | jq '[.days[].tempmin] | min')
              MAX_TEMP=$(echo "$RESPONSE_BODY" | jq '[.days[].tempmax] | max')
              AVG_TEMP=$(echo "$RESPONSE_BODY" | jq '[.days[].temp] | add / length | round')
              
              # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ—Å–∞–¥–∫–æ–≤
              HAS_RAIN=$(echo "$RESPONSE_BODY" | jq '[.days[].preciptype] | map(select(. != null)) | flatten | any(contains("rain"))')
              HAS_SNOW=$(echo "$RESPONSE_BODY" | jq '[.days[].preciptype] | map(select(. != null)) | flatten | any(contains("snow"))')
              
              echo "min_temp=${MIN_TEMP}" >> $GITHUB_OUTPUT
              echo "max_temp=${MAX_TEMP}" >> $GITHUB_OUTPUT
              echo "avg_temp=${AVG_TEMP}" >> $GITHUB_OUTPUT
              echo "has_rain=${HAS_RAIN}" >> $GITHUB_OUTPUT
              echo "has_snow=${HAS_SNOW}" >> $GITHUB_OUTPUT
              echo "destination=${DESTINATION}" >> $GITHUB_OUTPUT
              echo "forecast_success=true" >> $GITHUB_OUTPUT
              
              echo "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: min=${MIN_TEMP}¬∞C, max=${MAX_TEMP}¬∞C, avg=${AVG_TEMP}¬∞C"
              echo "–û—Å–∞–¥–∫–∏: –¥–æ–∂–¥—å=${HAS_RAIN}, —Å–Ω–µ–≥=${HAS_SNOW}"
            else
              echo "‚ö†Ô∏è –ü–æ–ª—É—á–µ–Ω –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON-–æ—Ç–≤–µ—Ç –æ—Ç API"
              echo "–û—Ç–≤–µ—Ç: ${RESPONSE_BODY:0:500}"
              echo "forecast_success=false" >> $GITHUB_OUTPUT
            fi
          else
            echo "‚ùå –û—à–∏–±–∫–∞ API. HTTP –∫–æ–¥: ${HTTP_CODE}"
            echo "–û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞: ${RESPONSE_BODY:0:500}"
            echo "forecast_success=false" >> $GITHUB_OUTPUT
          fi

      - name: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ø–∏—Å–æ–∫ –≤–µ—â–µ–π
        id: generate_list
        run: |
          TRIP_TYPE="${{ github.event.inputs.trip_type }}"
          DAYS="${{ github.event.inputs.days }}"
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ
          if [ "${{ steps.weather_forecast.outputs.forecast_success }}" = "true" ]; then
            MIN_TEMP="${{ steps.weather_forecast.outputs.min_temp }}"
            MAX_TEMP="${{ steps.weather_forecast.outputs.max_temp }}"
            HAS_RAIN="${{ steps.weather_forecast.outputs.has_rain }}"
            HAS_SNOW="${{ steps.weather_forecast.outputs.has_snow }}"
            DESTINATION="${{ steps.weather_forecast.outputs.destination }}"
            
            # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–æ–≥–æ–¥–µ
            CLOTHING_TIPS="*–ü–û–ì–û–î–ê –í ${DESTINATION}:*\n"
            CLOTHING_TIPS+="‚Ä¢ –ú–∏–Ω. —Ç–µ–º–ø.: ${MIN_TEMP}¬∞C\n"
            CLOTHING_TIPS+="‚Ä¢ –ú–∞–∫—Å. —Ç–µ–º–ø.: ${MAX_TEMP}¬∞C\n\n"
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω—ã–π —Ä–µ–∂–∏–º
            if (( $(echo "$MAX_TEMP >= 25" | bc -l) )); then
              CLOTHING_TIPS+="*–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:*\n‚Ä¢ –õ–µ–≥–∫–∞—è –æ–¥–µ–∂–¥–∞ (—à–æ—Ä—Ç—ã, —Ñ—É—Ç–±–æ–ª–∫–∏)\n‚Ä¢ –ì–æ–ª–æ–≤–Ω–æ–π —É–±–æ—Ä\n‚Ä¢ –°–æ–ª–Ω—Ü–µ–∑–∞—â–∏—Ç–Ω—ã–µ –æ—á–∫–∏\n‚Ä¢ –ö—Ä–µ–º –æ—Ç –∑–∞–≥–∞—Ä–∞\n"
            elif (( $(echo "$MIN_TEMP < 10" | bc -l) )); then
              CLOTHING_TIPS+="*–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:*\n‚Ä¢ –¢–µ–ø–ª–∞—è –∫—É—Ä—Ç–∫–∞\n‚Ä¢ –°–≤–∏—Ç–µ—Ä/–∫–æ—Ñ—Ç–∞\n‚Ä¢ –¢–µ—Ä–º–æ–±–µ–ª—å–µ\n‚Ä¢ –®–∞–ø–∫–∞, —à–∞—Ä—Ñ, –ø–µ—Ä—á–∞—Ç–∫–∏\n"
            else
              CLOTHING_TIPS+="*–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:*\n‚Ä¢ –î–∂–∏–Ω—Å—ã/–±—Ä—é–∫–∏\n‚Ä¢ –°–≤–∏—Ç–µ—Ä/–∫–æ—Ñ—Ç–∞\n‚Ä¢ –í–µ—Ç—Ä–æ–≤–∫–∞\n‚Ä¢ –£–¥–æ–±–Ω–∞—è –æ–±—É–≤—å\n"
            fi
            
            # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ—Å–∞–¥–∫–∞–º
            if [ "$HAS_RAIN" = "true" ]; then
              CLOTHING_TIPS+="‚Ä¢ –î–æ–∂–¥–µ–≤–∏–∫ –∏–ª–∏ –∑–æ–Ω—Ç\n‚Ä¢ –í–æ–¥–æ–Ω–µ–ø—Ä–æ–Ω–∏—Ü–∞–µ–º–∞—è –æ–±—É–≤—å\n"
            fi
            if [ "$HAS_SNOW" = "true" ]; then
              CLOTHING_TIPS+="‚Ä¢ –¢–µ–ø–ª–∞—è –∑–∏–º–Ω—è—è –æ–±—É–≤—å\n‚Ä¢ –ù–µ–ø—Ä–æ–º–æ–∫–∞–µ–º—ã–µ –ø–µ—Ä—á–∞—Ç–∫–∏\n"
            fi
            
            WEATHER_INFO="${CLOTHING_TIPS}"
          else
            WEATHER_INFO="*–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω*\n–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–≥–æ–¥—É —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –ø–æ–µ–∑–¥–∫–æ–π.\n\n"
          fi
          
          # –ë–∞–∑–æ–≤—ã–µ –≤–µ—â–∏ –¥–ª—è –≤—Å–µ—Ö –ø–æ–µ–∑–¥–æ–∫
          BASE_ITEMS="*–ë–ê–ó–û–í–´–ï –í–ï–©–ò:*\n"
          BASE_ITEMS+="‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç—ã (–ø–∞—Å–ø–æ—Ä—Ç, –±–∏–ª–µ—Ç—ã, —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞)\n"
          BASE_ITEMS+="‚Ä¢ –î–µ–Ω—å–≥–∏ –∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –∫–∞—Ä—Ç—ã\n"
          BASE_ITEMS+="‚Ä¢ –¢–µ–ª–µ—Ñ–æ–Ω –∏ –∑–∞—Ä—è–¥–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ\n"
          BASE_ITEMS+="‚Ä¢ –õ–µ–∫–∞—Ä—Å—Ç–≤–∞ (–ª–∏—á–Ω—ã–µ + –±–∞–∑–æ–≤—ã–µ)\n"
          BASE_ITEMS+="‚Ä¢ –ì–∏–≥–∏–µ–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏\n"
          BASE_ITEMS+="‚Ä¢ –í–ª–∞–∂–Ω—ã–µ —Å–∞–ª—Ñ–µ—Ç–∫–∏\n"
          
          # –í–µ—â–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –ø–æ–µ–∑–¥–∫–∏
          case $TRIP_TYPE in
            "–ø–ª—è–∂–Ω—ã–π –æ—Ç–¥—ã—Ö")
              SPECIFIC_ITEMS="*–î–õ–Ø –ü–õ–Ø–ñ–ù–û–ì–û –û–¢–î–´–•–ê:*\n"
              SPECIFIC_ITEMS+="‚Ä¢ –ö—É–ø–∞–ª—å–Ω–∏–∫/–ø–ª–∞–≤–∫–∏\n"
              SPECIFIC_ITEMS+="‚Ä¢ –ü–ª—è–∂–Ω–æ–µ –ø–æ–ª–æ—Ç–µ–Ω—Ü–µ\n"
              SPECIFIC_ITEMS+="‚Ä¢ –ö—Ä–µ–º –æ—Ç –∑–∞–≥–∞—Ä–∞ SPF 30+\n"
              SPECIFIC_ITEMS+="‚Ä¢ –ü–∞–Ω–∞–º–∞/–∫–µ–ø–∫–∞\n"
              SPECIFIC_ITEMS+="‚Ä¢ –°–æ–ª–Ω—Ü–µ–∑–∞—â–∏—Ç–Ω—ã–µ –æ—á–∫–∏\n"
              SPECIFIC_ITEMS+="‚Ä¢ –®–ª–µ–ø–∞–Ω—Ü—ã\n"
              SPECIFIC_ITEMS+="‚Ä¢ –ü–ª—è–∂–Ω–∞—è —Å—É–º–∫–∞\n"
              ;;
            "–≥–æ—Ä–æ–¥—Å–∫–æ–π —Ç—É—Ä–∏–∑–º")
              SPECIFIC_ITEMS="*–î–õ–Ø –ì–û–†–û–î–°–ö–û–ì–û –¢–£–†–ò–ó–ú–ê:*\n"
              SPECIFIC_ITEMS+="‚Ä¢ –£–¥–æ–±–Ω–∞—è –æ–±—É–≤—å –¥–ª—è —Ö–æ–¥—å–±—ã\n"
              SPECIFIC_ITEMS+="‚Ä¢ –†—é–∫–∑–∞–∫ –¥–ª—è —ç–∫—Å–∫—É—Ä—Å–∏–π\n"
              SPECIFIC_ITEMS+="‚Ä¢ Power bank\n"
              SPECIFIC_ITEMS+="‚Ä¢ –ù–∞—É—à–Ω–∏–∫–∏\n"
              SPECIFIC_ITEMS+="‚Ä¢ –ö–∞—Ä—Ç–∞ –≥–æ—Ä–æ–¥–∞/–Ω–∞–≤–∏–≥–∞—Ç–æ—Ä\n"
              SPECIFIC_ITEMS+="‚Ä¢ –ë—É—Ç—ã–ª–∫–∞ –¥–ª—è –≤–æ–¥—ã\n"
              ;;
            "–≥–æ—Ä–Ω—ã–π –ø–æ—Ö–æ–¥")
              SPECIFIC_ITEMS="*–î–õ–Ø –ì–û–†–ù–û–ì–û –ü–û–•–û–î–ê:*\n"
              SPECIFIC_ITEMS+="‚Ä¢ –¢—Ä–µ–∫–∫–∏–Ω–≥–æ–≤—ã–µ –±–æ—Ç–∏–Ω–∫–∏\n"
              SPECIFIC_ITEMS+="‚Ä¢ –¢–µ—Ä–º–æ–±–µ–ª—å–µ\n"
              SPECIFIC_ITEMS+="‚Ä¢ –¢–µ–ø–ª–∞—è –∫—É—Ä—Ç–∫–∞\n"
              SPECIFIC_ITEMS+="‚Ä¢ –†—é–∫–∑–∞–∫ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π\n"
              SPECIFIC_ITEMS+="‚Ä¢ –§–æ–Ω–∞—Ä–∏–∫\n"
              SPECIFIC_ITEMS+="‚Ä¢ –¢–µ—Ä–º–æ—Å\n"
              SPECIFIC_ITEMS+="‚Ä¢ –°–æ–ª–Ω—Ü–µ–∑–∞—â–∏—Ç–Ω—ã–π –∫—Ä–µ–º\n"
              ;;
            "–¥–µ–ª–æ–≤–∞—è –ø–æ–µ–∑–¥–∫–∞")
              SPECIFIC_ITEMS="*–î–õ–Ø –î–ï–õ–û–í–û–ô –ü–û–ï–ó–î–ö–ò:*\n"
              SPECIFIC_ITEMS+="‚Ä¢ –î–µ–ª–æ–≤–æ–π –∫–æ—Å—Ç—é–º/–ø–ª–∞—Ç—å–µ\n"
              SPECIFIC_ITEMS+="‚Ä¢ –°–º–µ–Ω–Ω–∞—è –æ–±—É–≤—å\n"
              SPECIFIC_ITEMS+="‚Ä¢ –ù–æ—É—Ç–±—É–∫ –∏ –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã\n"
              SPECIFIC_ITEMS+="‚Ä¢ –ë–ª–æ–∫–Ω–æ—Ç –∏ —Ä—É—á–∫–∏\n"
              SPECIFIC_ITEMS+="‚Ä¢ –í–∏–∑–∏—Ç–∫–∏\n"
              SPECIFIC_ITEMS+="‚Ä¢ –ì–∞–¥–∂–µ—Ç—ã –¥–ª—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π\n"
              ;;
            "–∫–µ–º–ø–∏–Ω–≥")
              SPECIFIC_ITEMS="*–î–õ–Ø –ö–ï–ú–ü–ò–ù–ì–ê:*\n"
              SPECIFIC_ITEMS+="‚Ä¢ –ü–∞–ª–∞—Ç–∫–∞\n"
              SPECIFIC_ITEMS+="‚Ä¢ –°–ø–∞–ª—å–Ω–∏–∫\n"
              SPECIFIC_ITEMS+="‚Ä¢ –ö–æ–≤—Ä–∏–∫ —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π\n"
              SPECIFIC_ITEMS+="‚Ä¢ –ì–æ—Ä–µ–ª–∫–∞ –∏ –ø–æ—Å—É–¥–∞\n"
              SPECIFIC_ITEMS+="‚Ä¢ –§–æ–Ω–∞—Ä–∏–∫/—Ñ–æ–Ω–∞—Ä—å\n"
              SPECIFIC_ITEMS+="‚Ä¢ –ù–æ–∂ –º—É–ª—å—Ç–∏—Ç—É–ª\n"
              SPECIFIC_ITEMS+="‚Ä¢ –°—Ä–µ–¥—Å—Ç–≤–æ –æ—Ç –Ω–∞—Å–µ–∫–æ–º—ã—Ö\n"
              ;;
          esac
          
          # –†–∞—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–¥–µ–∂–¥—ã
          CLOTHING_COUNT="*–û–î–ï–ñ–î–ê ($DAYS –¥–Ω–µ–π):*\n"
          if [ $DAYS -le 3 ]; then
            CLOTHING_COUNT+="‚Ä¢ $((DAYS + 1)) –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤ –æ–¥–µ–∂–¥—ã\n"
            CLOTHING_COUNT+="‚Ä¢ $((DAYS + 1)) –ø–∞—Ä –Ω–æ—Å–∫–æ–≤\n"
            CLOTHING_COUNT+="‚Ä¢ $((DAYS + 1)) –ø–∞—Ä –Ω–∏–∂–Ω–µ–≥–æ –±–µ–ª—å—è\n"
          elif [ $DAYS -le 7 ]; then
            CLOTHING_COUNT+="‚Ä¢ 5-6 –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤ –æ–¥–µ–∂–¥—ã\n"
            CLOTHING_COUNT+="‚Ä¢ 7 –ø–∞—Ä –Ω–æ—Å–∫–æ–≤\n"
            CLOTHING_COUNT+="‚Ä¢ 7 –ø–∞—Ä –Ω–∏–∂–Ω–µ–≥–æ –±–µ–ª—å—è\n"
          else
            CLOTHING_COUNT+="‚Ä¢ 7 –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤ –æ–¥–µ–∂–¥—ã + –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ—Å—Ç–∏—Ä–∞—Ç—å\n"
            CLOTHING_COUNT+="‚Ä¢ 10 –ø–∞—Ä –Ω–æ—Å–∫–æ–≤\n"
            CLOTHING_COUNT+="‚Ä¢ 10 –ø–∞—Ä –Ω–∏–∂–Ω–µ–≥–æ –±–µ–ª—å—è\n"
          fi
          
          # –§–æ—Ä–º–∏—Ä—É–µ–º –∏—Ç–æ–≥–æ–≤—ã–π —Å–ø–∏—Å–æ–∫
          FINAL_LIST="*–°–ü–ò–°–û–ö –í–ï–©–ï–ô –î–õ–Ø –ü–û–ï–ó–î–ö–ò*\n"
          FINAL_LIST+="–¢–∏–ø: $TRIP_TYPE\n"
          FINAL_LIST+="–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: $DAYS –¥–Ω–µ–π\n"
          FINAL_LIST+="–î–∞—Ç–∞: $(date +"%d.%m.%Y")\n\n"
          
          FINAL_LIST+="${WEATHER_INFO}\n"
          FINAL_LIST+="${BASE_ITEMS}\n"
          FINAL_LIST+="${SPECIFIC_ITEMS}\n"
          FINAL_LIST+="${CLOTHING_COUNT}"
          
          # –î–æ–±–∞–≤–ª—è–µ–º —á–µ–∫–ª–∏—Å—Ç –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
          if [ "${{ github.event.inputs.has_checklist }}" = "true" ]; then
            FINAL_LIST+="\n*–ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –û–¢–ú–ï–¢–û–ö:*\n"
            FINAL_LIST+="[ ] –í–µ—â–∏ —Å–æ–±—Ä–∞–Ω—ã\n"
            FINAL_LIST+="[ ] –î–æ–∫—É–º–µ–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã\n"
            FINAL_LIST+="[ ] –î–µ–Ω—å–≥–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã\n"
            FINAL_LIST+="[ ] –ì–∞–¥–∂–µ—Ç—ã –∑–∞—Ä—è–∂–µ–Ω—ã\n"
            FINAL_LIST+="[ ] –ü—Ä–æ–¥—É–∫—Ç—ã –≤ –¥–æ—Ä–æ–≥—É\n"
            FINAL_LIST+="[ ] –ê–ø—Ç–µ—á–∫–∞ —Å–æ–±—Ä–∞–Ω–∞\n"
          fi
          
          echo "packing_list<<EOF" >> $GITHUB_OUTPUT
          echo -e "$FINAL_LIST" >> $GITHUB_OUTPUT
          echo "EOF" >> $GITHUB_OUTPUT
          echo "trip_type=$TRIP_TYPE" >> $GITHUB_OUTPUT
          echo "days=$DAYS" >> $GITHUB_OUTPUT

      - name: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –≤–µ—â–µ–π –≤ Telegram
        if: steps.generate_list.outputs.packing_list != ''
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: |
            ${{ steps.generate_list.outputs.packing_list }}
            
            *–°–æ–≤–µ—Ç—ã –ø–æ —É–ø–∞–∫–æ–≤–∫–µ:*
            1. –°–∫–ª–∞–¥—ã–≤–∞–π—Ç–µ –≤–µ—â–∏ —Ä—É–ª–æ–Ω—á–∏–∫–æ–º - —ç–∫–æ–Ω–æ–º–∏—Ç –º–µ—Å—Ç–æ
            2. –¢—è–∂–µ–ª—ã–µ –≤–µ—â–∏ –∫–ª–∞–¥–∏—Ç–µ –≤–Ω–∏–∑ —Ä—é–∫–∑–∞–∫–∞
            3. –î–æ–∫—É–º–µ–Ω—Ç—ã –∏ –¥–µ–Ω—å–≥–∏ –¥–µ—Ä–∂–∏—Ç–µ –ø—Ä–∏ —Å–µ–±–µ
            4. –ó–∞—Ä—è–¥–∫–∏ –∏ –º–µ–ª–∫–∏–µ –≤–µ—â–∏ ‚Äì –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–∞—Ä–º–∞–Ω
            5. –ù–µ –±–µ—Ä–∏—Ç–µ –ª–∏—à–Ω–µ–µ!
            
            –£–¥–∞—á–Ω–æ–π —É–ø–∞–∫–æ–≤–∫–∏! üéí‚ú®
          parse_mode: markdown

